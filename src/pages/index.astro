---
import { readdirSync } from 'node:fs';
import { join } from 'node:path';

// content/ ディレクトリから最新の年を自動検出
const contentDir = join(process.cwd(), 'content');
const files = readdirSync(contentDir);
const years = files
  .filter((f) => /^CHANGELOG_(\d{4})_JA\.md$/.test(f))
  .map((f) => f.match(/^CHANGELOG_(\d{4})_JA\.md$/)![1])
  .sort()
  .reverse();

const latestYear = years[0];
const base = import.meta.env.BASE_URL;

// 最新年へリダイレクト
return Astro.redirect(`${base}${latestYear}/`);
---
